<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<script type="text/javascript" src="httpRequest.js"></script>
<script type="text/javascript">
	/*Ajax 구현단계
		1. 자바스크립트 이벤트 발생
		2. XHR 객체 생성 (getXMLHttpRequest())
		3. 서버에 요청 sendRequest() 호출 (httpRequest에 여러 함수를 호출, 값 전달)
		4. 서버의 데이터 포맷 확인(xml, json, text)
		5. 콜백함수 정의 (XML, JSON, TEXT) -> HTML 변환
	*/
	function helloResult(){//서버에서 도착하면 이 함수 호출
		if(httpRequest.readyState == 4){//4 = 서버에 원하는 값이 모두 도착 , 1~3은 덜 도착한 것
			if(httpRequest.status == 200){// 서버 에러 없이 정상적이다.
				alert("서버응답: "+httpRequest.responseText);
			}
		}
	}
	
	function hello(){
		let params  = "name=" 
		+ encodeURIComponent(document.fmt.name.value);//한글을 인코딩
		
		sendRequest("hello.jsp", params, helloResult, "GET");
	}
</script>
<body>
	<form name="fmt">
		<input type = "text" name = "name">
		<input type = "button" value = "전송" onclick="hello()">
	</form>
</body>
</html>