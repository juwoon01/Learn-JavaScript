<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript">
        //함수를 호출할 경우 생성되는 실행 컨텍스트 영역

        let let1 = 10;
        function func(){
            let let1 = 20;
            console.log(let1);
        }
        func();
        console.log(let1);

        // let value = "value1";

        // function printFunc(){
        //     let value = "value2";

        //     function printValue(){
        //         return value;
        //     }
        //     console.log(printValue());//예상 value2
        // }
        // printFunc();

        let value = "value1";
        function printValue(){
            return value;
        }

        function printFunc(func){
            let value = "value2";
            console.log(func());
        }

        printFunc(printValue);// 선언부에서 가장 가까운 값 = value1,
                              // 호출에서 가장 가까운 값 = value2 
                              // 선언함수는 실행 전에 메모리에 할당되므로 예상 value1

        //그렇다면 메모리에 미리 올라오지 않는 익명함수는??
        let printValue02 = function(){
            return value;
        }
        printFunc(printValue02);
        //value1이 나온다 -> 실행전 메모리 할당은 상관없고
        // 호출 기준이 아닌 함수의 선언한 곳에서 가장 가까운 변수를 사용한다는 것을 알 수 있었다.
        

        //클로저
        function outerFunc(){
            let x = 10;

            let innerFunc = function(){
                console.log(x);
            }

            return innerFunc;
        }

        let inner = outerFunc();// 원래는 호출의 실행이 끝나면 x가 메모리에서 사라져야 하지만
        inner();                // 내부 함수가 이 변수를 사용하고 이를 리턴하면
                                // 계속 사용하기 때문에 메모리에 남아있는다.

        
        function outer(arg1, arg2){
            let local = 8;

            function inner(innerArg){
                console.log((arg1 + arg2)/(innerArg+local))
            }
            return inner;
        }

        let innerFun = outer(30,20);
        innerFun(2);
        outer(30,20)(2);


    </script>
</head>
<body>
    
</body>
</html>